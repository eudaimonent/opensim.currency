
////////////////////////////////////////////////////////////////////////////////////////////
//
//  DTL/NSL Money Server for Aurora-Sim 0.4.x for Linux/Unix
//                                                        by Fumi.Iseki and NSL  9/10 2011
//                                                        http://www.nsl.tuis.ac.jp



0. Outline

 This Money Server is modified version of DTL Currency Processing (http://forge.opensimulator.org/gf/project/currency/).
 As for this, some bug fixes are done. And this can be operated by Aurora-Sim 0.4.x. 
 But, WEB Monitor function (ASP.NET) is removed from original DTL Currency. So, this version is less secure than original 
 version!! Please use this at your own risk!!



1. Install

 # git clone git://github.com/MatrixSmythe/Aurora.git aurora
 # cd aurora
 # svn co http://www.nsl.tuis.ac.jp/svn/opensim/opensim.currency/branches/aurora aurora.currency
 # patch -p1 < aurora.currency/aurora_currency_latest.patch
 # ./runprebuild.sh && xbuild
 # cd aurora.currency
 # ./build.sh
 # cd ../bin
 # vi MoneyServer.ini       (modify [MySql] section)
 ........
 # cd Configuration/Modules
 # cp Economy.ini.example Economy.ini
 # vi Economy.ini


2. Setting

2-1. Money Server

 # cd aurora/bin
 # vi MoneyServer.ini 

 - Plese set hostname, database, username and password of MySQL at [MySql] section.
 - Please see aloso http://www.nsl.tuis.ac.jp/xoops/modules/xpwiki/?OpenSim%2FMoneyServer%2FMoneyServer.ini


2-2. Region Server

 # cd aurora/bin/Configuration/Modules
 # cp Economy.ini.example Economy.ini
 # vi Economy.ini 

 [Economy]
    SellEnabled = true

    EconomyModule = DTLNSLMoneyModule
    CurrencyServer = "https://(MoneyServer's Name or IP):8008/"  
    UserServer = "http://(UserServer's Name or IP):8002/"

    PriceUpload = 10
    PriceGroupCreate = 20


 - Attention) 
     Not use 127.0.0.1 or localhost for CurrencyServer and UserServer's address. UserServer's address is used for 
     identification of user on Money Server.

 - Please see also http://www.nsl.tuis.ac.jp/xoops/modules/xpwiki/?OpenSim%2FMoneyServer%2FEconomy.ini


2-3. Helper Script

  - If you do not use XoopenSim or Modlos (Web Interface), you should setup helper scripts by manual.
  - Please copy Scripts/* to any Web contents directory, and execute setup_sripts.sh shell script.
    And next, edit include/config.php to rewrite ENV_HELPER_URL, ENV_HELPER_PATH, DB information, and etc.etc.
  - Please see also: http://www.nsl.tuis.ac.jp/xoops/modules/xpwiki/?OpenSim%2FMoneyServer%2FHelper%20Script

 ex.)
  # mkdir /var/www/currency
  # cp -Rpd Scripts/* /var/www/currency
  # cd /var/www/currency
  # ./setup_sripts.sh
  # chown -R www-data.www-data .
  # vi include/config.php

  - Please execute viewer with "-helperuri [ENV_HELPER_URL/]" option.
    Here, ENV_HELPER_URL is helper directory url in include/config.php.
  - ex.) -helperuri http://localhost/currency/helper/   need last '/'



3. Execution

3-1. Aurora Server

 # cd aurora/bin
 # mono Aurora.Server.exe


3-2. Money Server

 # cd aurora/bin
 # mono MoneyServer.exe


3-3. Region Server

 # cd aurora/bin
 # mono Aurora.exe



4. License.

 This software conforms to the license of DTL Currency Processing.
 Please see also http://forge.opensimulator.org/gf/project/currency/



5. Attention.

 This is unofficial software. Please do not inquire to Aurora-Sim development team or DTL Currency Processing 
 development team about this software. 



6. Exemption from responsibility.

 This software is not guaranteed at all. The author doesn't assume the responsibility for the
 problem that occurs along with use, remodeling, and the re-distribution of this software at all.
 Please use everything by the self-responsibility.



7. Address of thanks.

 This Money Server is modified version of DTL Currency Processing.
 Please see also http://forge.opensimulator.org/gf/project/currency/

 Thank you very much!!

